-- Drop table

-- DROP TABLE SYSDBA.OFEXTCOMPONENTCONF;

CREATE TABLE SYSDBA.OFEXTCOMPONENTCONF (
	SUBDOMAIN varchar(255) NOT NULL,
	WILDCARD int NOT NULL,
	SECRET varchar(255),
	PERMISSION varchar(10) NOT NULL,
	CONSTRAINT OFEXTCOMPONENTCONF_PK PRIMARY KEY (SUBDOMAIN)
);

-- Drop table

-- DROP TABLE SYSDBA.OFGROUP;

CREATE TABLE SYSDBA.OFGROUP (
	GROUPNAME varchar(50) NOT NULL,
	DESCRIPTION varchar(255),
	CONSTRAINT OFGROUP_PK PRIMARY KEY (GROUPNAME)
);

-- Drop table

-- DROP TABLE SYSDBA.OFGROUPPROP;

CREATE TABLE SYSDBA.OFGROUPPROP (
	GROUPNAME varchar(50) NOT NULL,
	NAME varchar(100) NOT NULL,
	PROPVALUE varchar(4000) NOT NULL,
	CONSTRAINT OFGROUPPROP_PK PRIMARY KEY (GROUPNAME,NAME)
);

-- Drop table

-- DROP TABLE SYSDBA.OFGROUPUSER;

CREATE TABLE SYSDBA.OFGROUPUSER (
	GROUPNAME varchar(50) NOT NULL,
	USERNAME varchar(100) NOT NULL,
	ADMINISTRATOR int NOT NULL,
	CONSTRAINT OFGROUPUSER_PK PRIMARY KEY (GROUPNAME,USERNAME,ADMINISTRATOR)
);

-- Drop table

-- DROP TABLE SYSDBA.OFID;

CREATE TABLE SYSDBA.OFID (
	IDTYPE int NOT NULL,
	ID bigint NOT NULL,
	CONSTRAINT OFID_PK PRIMARY KEY (IDTYPE)
);

-- Drop table

-- DROP TABLE SYSDBA.OFMUCAFFILIATION;

CREATE TABLE SYSDBA.OFMUCAFFILIATION (
	ROOMID bigint NOT NULL,
	JID varchar(1024) NOT NULL,
	AFFILIATION int NOT NULL,
	NICKNAME varchar(255),
	CONSTRAINT OFMUCAFFILIATION_PK PRIMARY KEY (ROOMID,JID)
);

-- Drop table

-- DROP TABLE SYSDBA.OFMUCCONVERSATIONLOG;

CREATE TABLE SYSDBA.OFMUCCONVERSATIONLOG (
	ROOMID bigint NOT NULL,
	MESSAGEID bigint NOT NULL,
	SENDER varchar(1024) NOT NULL,
	NICKNAME varchar(255),
	LOGTIME char(15) NOT NULL,
	SUBJECT varchar(255),
	BODY varchar(4000),
	STANZA varchar(4000)
);
CREATE INDEX OFMUCCONVERSATIONLOG_MSG_ID ON SYSDBA.OFMUCCONVERSATIONLOG (MESSAGEID);
CREATE INDEX OFMUCCONVERSATIONLOG_TIME_IDX ON SYSDBA.OFMUCCONVERSATIONLOG (LOGTIME);

-- Drop table

-- DROP TABLE SYSDBA.OFMUCMEMBER;

CREATE TABLE SYSDBA.OFMUCMEMBER (
	ROOMID bigint NOT NULL,
	JID varchar(1024) NOT NULL,
	NICKNAME varchar(255),
	FIRSTNAME varchar(100),
	LASTNAME varchar(100),
	URL varchar(100),
	EMAIL varchar(100),
	FAQENTRY varchar(100),
	CONSTRAINT OFMUCMEMBER_PK PRIMARY KEY (ROOMID,JID)
);

-- Drop table

-- DROP TABLE SYSDBA.OFMUCROOM;

CREATE TABLE SYSDBA.OFMUCROOM (
	SERVICEID bigint NOT NULL,
	ROOMID bigint NOT NULL,
	CREATIONDATE char(15) NOT NULL,
	MODIFICATIONDATE char(15) NOT NULL,
	NAME varchar(50) NOT NULL,
	NATURALNAME varchar(255) NOT NULL,
	DESCRIPTION varchar(255),
	LOCKEDDATE char(15) NOT NULL,
	EMPTYDATE char(15),
	CANCHANGESUBJECT int NOT NULL,
	MAXUSERS int NOT NULL,
	PUBLICROOM int NOT NULL,
	MODERATED int NOT NULL,
	MEMBERSONLY int NOT NULL,
	CANINVITE int NOT NULL,
	ROOMPASSWORD varchar(50),
	CANDISCOVERJID int NOT NULL,
	LOGENABLED int NOT NULL,
	SUBJECT varchar(100),
	ROLESTOBROADCAST int NOT NULL,
	USERESERVEDNICK int NOT NULL,
	CANCHANGENICK int NOT NULL,
	CANREGISTER int NOT NULL,
	ALLOWPM int,
	CONSTRAINT OFMUCROOM_PK PRIMARY KEY (SERVICEID,NAME)
);
CREATE INDEX OFMUCROOM_ROOMID_IDX ON SYSDBA.OFMUCROOM (ROOMID);
CREATE INDEX OFMUCROOM_SERVICEID_IDX ON SYSDBA.OFMUCROOM (SERVICEID);

-- Drop table

-- DROP TABLE SYSDBA.OFMUCROOMPROP;

CREATE TABLE SYSDBA.OFMUCROOMPROP (
	ROOMID bigint NOT NULL,
	NAME varchar(100) NOT NULL,
	PROPVALUE varchar(1024) NOT NULL,
	CONSTRAINT OFMUCROOMPROP_PK PRIMARY KEY (ROOMID,NAME)
);

-- Drop table

-- DROP TABLE SYSDBA.OFMUCSERVICE;

CREATE TABLE SYSDBA.OFMUCSERVICE (
	SERVICEID bigint NOT NULL,
	SUBDOMAIN varchar(255) NOT NULL,
	DESCRIPTION varchar(255),
	ISHIDDEN int NOT NULL,
	CONSTRAINT OFMUCSERVICE_PK PRIMARY KEY (SUBDOMAIN)
);
CREATE INDEX OFMUCSERVICE_SERVICEID_IDX ON SYSDBA.OFMUCSERVICE (SERVICEID);

-- Drop table

-- DROP TABLE SYSDBA.OFMUCSERVICEPROP;

CREATE TABLE SYSDBA.OFMUCSERVICEPROP (
	SERVICEID bigint NOT NULL,
	NAME varchar(100) NOT NULL,
	PROPVALUE varchar(1024) NOT NULL,
	CONSTRAINT OFMUCSERVICEPROP_PK PRIMARY KEY (SERVICEID,NAME)
);

-- Drop table

-- DROP TABLE SYSDBA.OFOFFLINE;

CREATE TABLE SYSDBA.OFOFFLINE (
	USERNAME varchar(64) NOT NULL,
	MESSAGEID bigint NOT NULL,
	CREATIONDATE char(15) NOT NULL,
	MESSAGESIZE int NOT NULL,
	STANZA text NOT NULL,
	CONSTRAINT OFOFFLINE_PK PRIMARY KEY (USERNAME,MESSAGEID)
);

-- Drop table

-- DROP TABLE SYSDBA.OFPRESENCE;

CREATE TABLE SYSDBA.OFPRESENCE (
	USERNAME varchar(64) NOT NULL,
	OFFLINEPRESENCE text,
	OFFLINEDATE char(15) NOT NULL,
	CONSTRAINT OFPRESENCE_PK PRIMARY KEY (USERNAME)
);

-- Drop table

-- DROP TABLE SYSDBA.OFPRIVACYLIST;

CREATE TABLE SYSDBA.OFPRIVACYLIST (
	USERNAME varchar(64) NOT NULL,
	NAME varchar(100) NOT NULL,
	ISDEFAULT int NOT NULL,
	LIST text NOT NULL,
	CONSTRAINT OFPRIVACYLIST_PK PRIMARY KEY (USERNAME,NAME)
);
CREATE INDEX OFPRIVACYLIST_DEFAULT_IDX ON SYSDBA.OFPRIVACYLIST (USERNAME,ISDEFAULT);

-- Drop table

-- DROP TABLE SYSDBA.OFPROPERTY;

CREATE TABLE SYSDBA.OFPROPERTY (
	NAME varchar(100) NOT NULL,
	PROPVALUE varchar(4000) NOT NULL,
	"ENCRYPTED" int,
	IV char(24),
	CONSTRAINT OFPROPERTY_PK PRIMARY KEY (NAME)
);

-- Drop table

-- DROP TABLE SYSDBA.OFPUBSUBAFFILIATION;

CREATE TABLE SYSDBA.OFPUBSUBAFFILIATION (
	SERVICEID varchar(100) NOT NULL,
	NODEID varchar(100) NOT NULL,
	JID varchar(1024) NOT NULL,
	AFFILIATION varchar(10) NOT NULL,
	CONSTRAINT OFPUBSUBAFFILIATION_PK PRIMARY KEY (SERVICEID,NODEID,JID)
);

-- Drop table

-- DROP TABLE SYSDBA.OFPUBSUBDEFAULTCONF;

CREATE TABLE SYSDBA.OFPUBSUBDEFAULTCONF (
	SERVICEID varchar(100) NOT NULL,
	LEAF int NOT NULL,
	DELIVERPAYLOADS int NOT NULL,
	MAXPAYLOADSIZE int NOT NULL,
	PERSISTITEMS int NOT NULL,
	MAXITEMS int NOT NULL,
	NOTIFYCONFIGCHANGES int NOT NULL,
	NOTIFYDELETE int NOT NULL,
	NOTIFYRETRACT int NOT NULL,
	PRESENCEBASED int NOT NULL,
	SENDITEMSUBSCRIBE int NOT NULL,
	PUBLISHERMODEL varchar(15) NOT NULL,
	SUBSCRIPTIONENABLED int NOT NULL,
	ACCESSMODEL varchar(10) NOT NULL,
	"LANGUAGE" varchar(255),
	REPLYPOLICY varchar(15),
	ASSOCIATIONPOLICY varchar(15) NOT NULL,
	MAXLEAFNODES int NOT NULL,
	CONSTRAINT OFPUBSUBDEFAULTCONF_PK PRIMARY KEY (SERVICEID,LEAF)
);

-- Drop table

-- DROP TABLE SYSDBA.OFPUBSUBITEM;

CREATE TABLE SYSDBA.OFPUBSUBITEM (
	SERVICEID varchar(100) NOT NULL,
	NODEID varchar(100) NOT NULL,
	ID varchar(100) NOT NULL,
	JID varchar(1024) NOT NULL,
	CREATIONDATE char(15) NOT NULL,
	PAYLOAD varchar(4000),
	CONSTRAINT OFPUBSUBITEM_PK PRIMARY KEY (SERVICEID,NODEID,ID)
);

-- Drop table

-- DROP TABLE SYSDBA.OFPUBSUBNODE;

CREATE TABLE SYSDBA.OFPUBSUBNODE (
	SERVICEID varchar(100) NOT NULL,
	NODEID varchar(100) NOT NULL,
	LEAF int NOT NULL,
	CREATIONDATE char(15) NOT NULL,
	MODIFICATIONDATE char(15) NOT NULL,
	PARENT varchar(100),
	DELIVERPAYLOADS int NOT NULL,
	MAXPAYLOADSIZE int,
	PERSISTITEMS int,
	MAXITEMS int,
	NOTIFYCONFIGCHANGES int NOT NULL,
	NOTIFYDELETE int NOT NULL,
	NOTIFYRETRACT int NOT NULL,
	PRESENCEBASED int NOT NULL,
	SENDITEMSUBSCRIBE int NOT NULL,
	PUBLISHERMODEL varchar(15) NOT NULL,
	SUBSCRIPTIONENABLED int NOT NULL,
	CONFIGSUBSCRIPTION int NOT NULL,
	ACCESSMODEL varchar(10) NOT NULL,
	PAYLOADTYPE varchar(100),
	BODYXSLT varchar(100),
	DATAFORMXSLT varchar(100),
	CREATOR varchar(1024) NOT NULL,
	DESCRIPTION varchar(255),
	"LANGUAGE" varchar(255),
	NAME varchar(50),
	REPLYPOLICY varchar(15),
	ASSOCIATIONPOLICY varchar(15),
	MAXLEAFNODES int,
	CONSTRAINT OFPUBSUBNODE_PK PRIMARY KEY (SERVICEID,NODEID)
);

-- Drop table

-- DROP TABLE SYSDBA.OFPUBSUBNODEGROUPS;

CREATE TABLE SYSDBA.OFPUBSUBNODEGROUPS (
	SERVICEID varchar(100) NOT NULL,
	NODEID varchar(100) NOT NULL,
	ROSTERGROUP varchar(100) NOT NULL
);
CREATE INDEX OFPUBSUBNODEGROUPS_IDX ON SYSDBA.OFPUBSUBNODEGROUPS (SERVICEID,NODEID);

-- Drop table

-- DROP TABLE SYSDBA.OFPUBSUBNODEJIDS;

CREATE TABLE SYSDBA.OFPUBSUBNODEJIDS (
	SERVICEID varchar(100) NOT NULL,
	NODEID varchar(100) NOT NULL,
	JID varchar(1024) NOT NULL,
	ASSOCIATIONTYPE varchar(20) NOT NULL,
	CONSTRAINT OFPUBSUBNODEJIDS_PK PRIMARY KEY (SERVICEID,NODEID,JID)
);

-- Drop table

-- DROP TABLE SYSDBA.OFPUBSUBSUBSCRIPTION;

CREATE TABLE SYSDBA.OFPUBSUBSUBSCRIPTION (
	SERVICEID varchar(100) NOT NULL,
	NODEID varchar(100) NOT NULL,
	ID varchar(100) NOT NULL,
	JID varchar(1024) NOT NULL,
	"OWNER" varchar(1024) NOT NULL,
	STATE varchar(15) NOT NULL,
	DELIVER int NOT NULL,
	DIGEST int NOT NULL,
	DIGEST_FREQUENCY int NOT NULL,
	EXPIRE char(15),
	INCLUDEBODY int NOT NULL,
	SHOWVALUES varchar(30) NOT NULL,
	SUBSCRIPTIONTYPE varchar(10) NOT NULL,
	SUBSCRIPTIONDEPTH int NOT NULL,
	KEYWORD varchar(200),
	CONSTRAINT OFPUBSUBSUBSCRIPTION_PK PRIMARY KEY (SERVICEID,NODEID,ID)
);

-- Drop table

-- DROP TABLE SYSDBA.OFREMOTESERVERCONF;

CREATE TABLE SYSDBA.OFREMOTESERVERCONF (
	XMPPDOMAIN varchar(255) NOT NULL,
	REMOTEPORT int,
	PERMISSION varchar(10) NOT NULL,
	CONSTRAINT OFREMOTESERVERCONF_PK PRIMARY KEY (XMPPDOMAIN)
);

-- Drop table

-- DROP TABLE SYSDBA.OFROSTER;

CREATE TABLE SYSDBA.OFROSTER (
	ROSTERID bigint NOT NULL,
	USERNAME varchar(64) NOT NULL,
	JID varchar(1024) NOT NULL,
	SUB int NOT NULL,
	ASK int NOT NULL,
	RECV int NOT NULL,
	NICK varchar(255),
	CONSTRAINT OFROSTER_PK PRIMARY KEY (ROSTERID)
);
CREATE INDEX OFROSTER_JID_IDX ON SYSDBA.OFROSTER (JID);
CREATE INDEX OFROSTER_USERNAME_IDX ON SYSDBA.OFROSTER (USERNAME);

-- Drop table

-- DROP TABLE SYSDBA.OFROSTERGROUPS;

CREATE TABLE SYSDBA.OFROSTERGROUPS (
	ROSTERID bigint NOT NULL,
	"RANK" int NOT NULL,
	GROUPNAME varchar(255) NOT NULL,
	CONSTRAINT OFROSTERGROUPS_PK PRIMARY KEY (ROSTERID,"RANK"),
	CONSTRAINT OFROSTERGROUPS_ROSTERID_FK FOREIGN KEY (ROSTERID) REFERENCES SYSDBA.OFROSTER(ROSTERID)
);
CREATE INDEX OFROSTERGROUP_ROSTERID_IDX ON SYSDBA.OFROSTERGROUPS (ROSTERID);

-- Drop table

-- DROP TABLE SYSDBA.OFSASLAUTHORIZED;

CREATE TABLE SYSDBA.OFSASLAUTHORIZED (
	USERNAME varchar(64) NOT NULL,
	PRINCIPAL varchar(4000) NOT NULL,
	CONSTRAINT OFSASLAUTHORIZED_PK PRIMARY KEY (USERNAME,PRINCIPAL)
);

-- Drop table

-- DROP TABLE SYSDBA.OFSECURITYAUDITLOG;

CREATE TABLE SYSDBA.OFSECURITYAUDITLOG (
	MSGID bigint NOT NULL,
	USERNAME varchar(64) NOT NULL,
	ENTRYSTAMP bigint NOT NULL,
	SUMMARY varchar(255) NOT NULL,
	NODE varchar(255) NOT NULL,
	DETAILS varchar(4000),
	CONSTRAINT OFSECURITYAUDITLOG_PK PRIMARY KEY (MSGID)
);
CREATE INDEX OFSECURITYAUDITLOG_TSTAMP_IDX ON SYSDBA.OFSECURITYAUDITLOG (ENTRYSTAMP);
CREATE INDEX OFSECURITYAUDITLOG_UNAME_IDX ON SYSDBA.OFSECURITYAUDITLOG (USERNAME);

-- Drop table

-- DROP TABLE SYSDBA.OFUSER;

CREATE TABLE SYSDBA.OFUSER (
	USERNAME varchar(64) NOT NULL,
	STOREDKEY varchar(32) DEFAULT NULL,
	SERVERKEY varchar(32) DEFAULT NULL,
	SALT varchar(32) DEFAULT NULL,
	ITERATIONS int,
	PLAINPASSWORD varchar(64) DEFAULT NULL,
	ENCRYPTEDPASSWORD varchar(255) DEFAULT NULL,
	NAME varchar(100) DEFAULT NULL,
	EMAIL varchar(100) DEFAULT NULL,
	CREATIONDATE varchar(15) NOT NULL,
	MODIFICATIONDATE varchar(15) NOT NULL,
	ID bigint NOT NULL,
	GROUP_CODE varchar(256) DEFAULT NULL,
	"IDENTITY" varchar(64) DEFAULT NULL,
	SEX varchar(4) DEFAULT NULL,
	STATUS varchar(8) DEFAULT NULL,
	TELEPHONE varchar(32) DEFAULT NULL,
	USER_CARD varchar(18) DEFAULT NULL,
	GROUP_ROOT_CODE varchar(100),
	CONSTRAINT OFUSER_PK PRIMARY KEY (ID)
);
CREATE INDEX OFUSER_CDATE_IDX ON SYSDBA.OFUSER (CREATIONDATE);
CREATE INDEX UKBT1F0072O9H9A62989H06PV8Q ON SYSDBA.OFUSER (USERNAME);

-- Drop table

-- DROP TABLE SYSDBA.OFUSERFLAG;

CREATE TABLE SYSDBA.OFUSERFLAG (
	USERNAME varchar(64) NOT NULL,
	NAME varchar(100) NOT NULL,
	STARTTIME char(15),
	ENDTIME char(15),
	CONSTRAINT OFUSERFLAG_PK PRIMARY KEY (USERNAME,NAME)
);
CREATE INDEX OFUSERFLAG_ETIME_IDX ON SYSDBA.OFUSERFLAG (ENDTIME);
CREATE INDEX OFUSERFLAG_STIME_IDX ON SYSDBA.OFUSERFLAG (STARTTIME);

-- Drop table

-- DROP TABLE SYSDBA.OFUSERPROP;

CREATE TABLE SYSDBA.OFUSERPROP (
	USERNAME varchar(64) NOT NULL,
	NAME varchar(100) NOT NULL,
	PROPVALUE varchar(1024) NOT NULL,
	CONSTRAINT OFUSERPROP_PK PRIMARY KEY (USERNAME,NAME)
);

-- Drop table

-- DROP TABLE SYSDBA.OFUSER_LOG;

CREATE TABLE SYSDBA.OFUSER_LOG (
	ID bigint NOT NULL,
	GROUP_CODE varchar(255),
	GROUP_NAME varchar(128),
	IP_ADDRESS varchar(255),
	MAC_ADDRESS varchar(255),
	OPERATION varchar(255),
	STATUS varchar(64),
	TERMINAL varchar(128),
	CREATE_TIME timestamp,
	USER_ID bigint,
	USERNAME varchar(128),
	group_root_code varchar(255),
	CONSTRAINT OFUSER_LOG_PKEY PRIMARY KEY (ID)
);

-- Drop table

-- DROP TABLE SYSDBA.OFVCARD;

CREATE TABLE SYSDBA.OFVCARD (
	USERNAME varchar(64) NOT NULL,
	VCARD clob NOT NULL,
	CONSTRAINT OFVCARD_PK PRIMARY KEY (USERNAME)
);

-- Drop table

-- DROP TABLE SYSDBA.OFVERSION;

CREATE TABLE SYSDBA.OFVERSION (
	NAME varchar(50) NOT NULL,
	"VERSION" int NOT NULL,
	CONSTRAINT OFVERSION_PK PRIMARY KEY (NAME)
);

-- Drop table

-- DROP TABLE SYSDBA.OF_MESSAGE_HISTORY;

CREATE TABLE SYSDBA.OF_MESSAGE_HISTORY (
	ID bigint NOT NULL,
	MESSAGE clob,
	RECEIVER varchar(128),
	SENDER varchar(128),
	CREATED_TIME timestamp,
	CONSTRAINT OF_MESSAGE_HISTORY_PKEY PRIMARY KEY (ID)
);

-- Drop table

-- DROP TABLE SYSDBA.UM_ADMIN;

CREATE TABLE SYSDBA.UM_ADMIN (
	ID bigint NOT NULL,
	CREATED_AT timestamp,
	ENCRYPTEDPASSWORD varchar(255),
	GROUP_CODE varchar(255),
	GROUP_NAME varchar(128),
	NICKNAME varchar(256),
	PLAINPASSWORD varchar(64),
	SALT varchar(64),
	TELEPHONE varchar(255),
	UPDATE_TIME timestamp,
	USERNAME varchar(256),
	CONSTRAINT UM_ADMIN_PKEY PRIMARY KEY (ID)
);

-- Drop table

-- DROP TABLE SYSDBA.UM_AUTHORITY;

CREATE TABLE SYSDBA.UM_AUTHORITY (
	ID bigint NOT NULL,
	CODE varchar(32),
	NAME varchar(32),
	OPERATION_CODE varchar(255),
	RESOURCE_CODE varchar(128),
	CONSTRAINT UM_AUTHORITY_PKEY PRIMARY KEY (ID)
);

-- Drop table

-- DROP TABLE SYSDBA.UM_AUTHORITY_ROLE;

CREATE TABLE SYSDBA.UM_AUTHORITY_ROLE (
	ID bigint NOT NULL,
	AUTH_CODE varchar(32),
	ROLE_CODE varchar(32),
	CONSTRAINT UM_AUTHORITY_ROLE_PKEY PRIMARY KEY (ID)
);

-- Drop table

-- DROP TABLE SYSDBA.UM_CLIENT_SETTING;

CREATE TABLE SYSDBA.UM_CLIENT_SETTING (
	ID bigint NOT NULL,
	SEND_FILE_SIZE int,
	SEND_FILE_SUFFIX varchar(255),
	storage_file_size bigint,
	storage_msg_size bigint,
	kb_msg_number int,
	CONSTRAINT UM_CLIENT_SETTING_PKEY PRIMARY KEY (ID)
);

-- Drop table

-- DROP TABLE SYSDBA.UM_CONTACTS;

CREATE TABLE SYSDBA.UM_CONTACTS (
	ID bigint NOT NULL,
	ALIAS varchar(32),
	FRIEND_JID varchar(64),
	USER_NAME varchar(64),
	CONSTRAINT UM_CONTACTS_PKEY PRIMARY KEY (ID)
);

-- Drop table

-- DROP TABLE SYSDBA.UM_GROUP;

CREATE TABLE SYSDBA.UM_GROUP (
	ID bigint NOT NULL,
	ADDRESS varchar(128),
	CODE varchar(255),
	GROUP_NAME varchar(128),
	GSEQUENCE int,
	PARENT_CODE varchar(255),
	SERVICE varchar(128),
	SUPERIOR_CODE varchar(64),
	TELEPHONE varchar(128),
	service_license varchar(64) DEFAULT 'n',
	CONSTRAINT UM_GROUP_PKEY PRIMARY KEY (ID)
);

-- Drop table

-- DROP TABLE SYSDBA.UM_GROUP_VISIBLE;

CREATE TABLE SYSDBA.UM_GROUP_VISIBLE (
	ID bigint NOT NULL,
	GROUP_CODE varchar(255),
	VISIBLE_CODE varchar(255),
	CONSTRAINT UM_GROUP_VISIBLE_PKEY PRIMARY KEY (ID)
);

-- Drop table

-- DROP TABLE SYSDBA.UM_NOTICE;

CREATE TABLE SYSDBA.UM_NOTICE (
	ID bigint NOT NULL,
	CONTENT clob,
	CREATE_TIME timestamp,
	TITLE varchar(256),
	ORGANIZE_CODES clob,
	CODES varchar(255),
	CONSTRAINT UM_NOTICE_PKEY PRIMARY KEY (ID)
);

-- Drop table

-- DROP TABLE SYSDBA.UM_NOTICE_SCOPE;

CREATE TABLE SYSDBA.UM_NOTICE_SCOPE (
	ID bigint NOT NULL,
	CODES clob,
	NOTICE_ID bigint,
	"SCOPE" varchar(128),
	CONSTRAINT UM_NOTICE_SCOPE_PKEY PRIMARY KEY (ID)
);

-- Drop table

-- DROP TABLE SYSDBA.UM_OPERATION;

CREATE TABLE SYSDBA.UM_OPERATION (
	ID bigint NOT NULL,
	CODE varchar(255),
	NAME varchar(255),
	CONSTRAINT UM_OPERATION_PKEY PRIMARY KEY (ID)
);

-- Drop table

-- DROP TABLE SYSDBA.UM_RESOURCE;

CREATE TABLE SYSDBA.UM_RESOURCE (
	ID bigint NOT NULL,
	CODE varchar(255),
	NAME varchar(255),
	CONSTRAINT UM_RESOURCE_PKEY PRIMARY KEY (ID)
);

-- Drop table

-- DROP TABLE SYSDBA.UM_ROLE;

CREATE TABLE SYSDBA.UM_ROLE (
	ID bigint NOT NULL,
	CODE varchar(32),
	NAME varchar(32),
	CONSTRAINT UM_ROLE_PKEY PRIMARY KEY (ID)
);
CREATE INDEX UKN2KW26JI2UF5OOF0HQ2N0SQJ9 ON SYSDBA.UM_ROLE (CODE);

-- Drop table

-- DROP TABLE SYSDBA.UM_ROOM_NOTICE;

CREATE TABLE SYSDBA.UM_ROOM_NOTICE (
	ID bigint NOT NULL,
	CONTENT clob,
	CREATE_TIME timestamp,
	ROOM_JID varchar(255),
	TITLE varchar(256),
	USER_NAME varchar(64),
	CONSTRAINT UM_ROOM_NOTICE_PKEY PRIMARY KEY (ID)
);

-- Drop table

-- DROP TABLE SYSDBA.UM_SYSTEM_ADMIN_LOG;

CREATE TABLE SYSDBA.UM_SYSTEM_ADMIN_LOG (
	ID bigint NOT NULL,
	GROUP_CODE varchar(255),
	GROUP_NAME varchar(128),
	NICKNAME varchar(256),
	OPERATION varchar(255),
	CREATED_TIME timestamp,
	USERNAME varchar(256),
	group_root_code varchar(128) DEFAULT NULL,
	CONSTRAINT UM_SYSTEM_ADMIN_LOG_PKEY PRIMARY KEY (ID)
);

-- Drop table

-- DROP TABLE SYSDBA.UM_USER_CONFIG;

CREATE TABLE SYSDBA.UM_USER_CONFIG (
	ID bigint NOT NULL,
	CHAT_LOG_STORAGE varchar(255),
	USERNAME varchar(128),
	STORAGE_FILE_UP_SIZE double precision,
	CONSTRAINT UM_USER_CONFIG_PKEY PRIMARY KEY (ID)
);

-- Drop table

-- DROP TABLE SYSDBA.UM_USER_ROLE;

CREATE TABLE SYSDBA.UM_USER_ROLE (
	ID bigint NOT NULL,
	ROLE_CODE varchar(32),
	USER_ID varchar(32),
	CONSTRAINT UM_USER_ROLE_PKEY PRIMARY KEY (ID)
);

-- Drop table

-- DROP TABLE SYSDBA.USERSTATUS;

CREATE TABLE SYSDBA.USERSTATUS (
	USERNAME varchar(64) NOT NULL,
	RESOURCE varchar(64) NOT NULL,
	ONLINE int NOT NULL,
	PRESENCE char(15),
	LASTIPADDRESS char(15) NOT NULL,
	LASTLOGINDATE char(15) NOT NULL,
	LASTLOGOFFDATE char(15),
	CONSTRAINT USERSTATUS_PKEY PRIMARY KEY (USERNAME,RESOURCE)
);

-- Drop table

-- DROP TABLE SYSDBA.USERSTATUSHISTORY;

CREATE TABLE SYSDBA.USERSTATUSHISTORY (
	HISTORYID bigint NOT NULL,
	USERNAME varchar(64) NOT NULL,
	RESOURCE varchar(64) NOT NULL,
	LASTIPADDRESS char(15) NOT NULL,
	LASTLOGINDATE char(15) NOT NULL,
	LASTLOGOFFDATE char(15) NOT NULL,
	CONSTRAINT USERSTATUSHISTORY_PKEY PRIMARY KEY (HISTORYID)
);

-- Drop table

-- DROP TABLE SYSDBA.IM_LICENSE;

CREATE TABLE SYSDBA.IM_LICENSE (
	ID bigint NOT NULL,
	EXPIRED_DATE varchar(32),
	GROUP_CODE varchar(32),
	GROUP_NAME varchar(32),
	IMPORTED_DATE varchar(32),
	HASH_KEY varchar(64),
	LICENSE_ID varchar(64),
	RELEASE_DATE varchar(32),
	USED boolean NOT NULL,
	USER_COUNT int,
	CONSTRAINT IM_LICENSE_PKEY PRIMARY KEY (ID)
);
CREATE UNIQUE INDEX UKAOIXV7O5RWWX7RAPHS6L1SEML ON SYSDBA.IM_LICENSE (LICENSE_ID);

create table SYSDBA.um_client_version (
	id bigint not null, 
	client_type varchar(255), 
	client_version varchar(255), 
	created_time timestamp, 
	remark varchar(2000),
	soft_network varchar(255), 
	CONSTRAINT um_client_version_pkey primary key (id)
);

CREATE TABLE SYSDBA.syntoim_ofmucoffline (
  id bigint NOT NULL,
  first bigint DEFAULT NULL,
  last bigint DEFAULT NULL,
  room varchar(255) DEFAULT NULL,
  username varchar(255) DEFAULT NULL,
  CONSTRAINT syntoim_ofmucoffline_pkey PRIMARY KEY (id)
);

CREATE TABLE SYSDBA.um_group_mini_program (
  id bigint NOT NULL,
  group_code varchar(64) DEFAULT NULL,
  program_code varchar(64) DEFAULT NULL,
  CONSTRAINT um_group_mini_program_pkey PRIMARY KEY (id)
);

CREATE TABLE SYSDBA.um_group_small_program (
  id bigint NOT NULL,
  group_code varchar(64) DEFAULT NULL,
  program_code varchar(64) DEFAULT NULL,
  CONSTRAINT um_group_small_program_pkey PRIMARY KEY (id)
);

CREATE TABLE SYSDBA.um_mini_program (
  id bigint NOT NULL,
  code varchar(64) DEFAULT NULL,
  name varchar(64) DEFAULT NULL,
  remark varchar(2000) DEFAULT NULL,
  url varchar(512) DEFAULT NULL,
  CONSTRAINT um_mini_program_pkey PRIMARY KEY (id)
);

CREATE TABLE SYSDBA.um_service_no (
  id bigint NOT NULL,
  code varchar(64) DEFAULT NULL,
  group_root_code varchar(64) DEFAULT NULL,
  name varchar(64) DEFAULT NULL,
  remark varchar(2000) DEFAULT NULL,
  CONSTRAINT um_service_no_pkey PRIMARY KEY (id)
);

CREATE TABLE SYSDBA.um_service_no_article (
  id bigint NOT NULL,
  create_date date DEFAULT NULL,
  remark varchar(2000) DEFAULT NULL,
  service_code varchar(64) DEFAULT NULL,
  title varchar(256) DEFAULT NULL,
  url varchar(512) DEFAULT NULL,
  CONSTRAINT um_service_no_article_pkey PRIMARY KEY (id)
);

CREATE TABLE SYSDBA.um_service_no_user (
  id bigint NOT NULL,
  service_code varchar(64) DEFAULT NULL,
  username varchar(64) DEFAULT NULL,
  CONSTRAINT um_service_no_user_pkey PRIMARY KEY (id)
);


INSERT INTO ofUser (id, username, plainPassword, name, email, creationDate, modificationDate) VALUES (1, 'admin', 'admin', 'Administrator', 'admin@example.com', '0', '0');
INSERT INTO SYSDBA.um_admin (id, created_at, encryptedpassword, group_code, group_name, nickname, plainpassword, salt, update_time, username, telephone) VALUES ('1', NULL, 'b78d09a26a2941502a612274da81abd34e4fe7c29cd43100', '-1', NULL, 'Administrator', '7C4A8D09CA3762AF61E59520943DC26494F8941B', 'rIElXcP+c13TyB2IxUzimltQahH+4ACp', '2019-04-08 20:02:15', 'superAdmin', '');

INSERT INTO ofID (idType, id) VALUES (18, 1);
INSERT INTO ofID (idType, id) VALUES (19, 1);
INSERT INTO ofID (idType, id) VALUES (23, 1);
INSERT INTO ofID (idType, id) VALUES (26, 2);
INSERT INTO ofID (idType, id) VALUES (25, 4);

INSERT INTO UM_CLIENT_SETTING (ID,SEND_FILE_SIZE,SEND_FILE_SUFFIX,storage_file_size,storage_msg_size,kb_msg_number) VALUES (157777808322176,50,'ofd,pdf,doc,docx,xls,xlsx,ppt,pptx',800,10,10000);

INSERT INTO ofVersion (name, version) VALUES ('openfire', 29);
INSERT INTO ofVersion (name, version) VALUES ('user-status', 0);

INSERT INTO ofMucService (serviceID, subdomain, isHidden) VALUES (1, 'conference', 0);

INSERT INTO SYSDBA.OFMUCSERVICEPROP (SERVICEID,NAME,PROPVALUE) VALUES (1,'history.type','none');
INSERT INTO SYSDBA.OFMUCSERVICEPROP (SERVICEID,NAME,PROPVALUE) VALUES (1,'room.canAnyoneDiscoverJID','true');
INSERT INTO SYSDBA.OFMUCSERVICEPROP (SERVICEID,NAME,PROPVALUE) VALUES (1,'room.logEnabled','true');
INSERT INTO SYSDBA.OFMUCSERVICEPROP (SERVICEID,NAME,PROPVALUE) VALUES (1,'room.maxUsers','0');
INSERT INTO SYSDBA.OFMUCSERVICEPROP (SERVICEID,NAME,PROPVALUE) VALUES (1,'room.canOccupantsInvite','true');
INSERT INTO SYSDBA.OFMUCSERVICEPROP (SERVICEID,NAME,PROPVALUE) VALUES (1,'room.publicRoom','true');
INSERT INTO SYSDBA.OFMUCSERVICEPROP (SERVICEID,NAME,PROPVALUE) VALUES (1,'room.canOccupantsChangeSubject','true');
INSERT INTO SYSDBA.OFMUCSERVICEPROP (SERVICEID,NAME,PROPVALUE) VALUES (1,'room.persistent','true');
INSERT INTO SYSDBA.OFMUCSERVICEPROP (SERVICEID,NAME,PROPVALUE) VALUES (1,'room.loginRestrictedToNickname','false');
INSERT INTO SYSDBA.OFMUCSERVICEPROP (SERVICEID,NAME,PROPVALUE) VALUES (1,'room.moderated','true');
INSERT INTO SYSDBA.OFMUCSERVICEPROP (SERVICEID,NAME,PROPVALUE) VALUES (1,'room.canChangeNickname','true');
INSERT INTO SYSDBA.OFMUCSERVICEPROP (SERVICEID,NAME,PROPVALUE) VALUES (1,'room.membersOnly','true');
INSERT INTO SYSDBA.OFMUCSERVICEPROP (SERVICEID,NAME,PROPVALUE) VALUES (1,'room.registrationEnabled','true');

INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('admin.authorizedJIDs','admin@im.cf.nm.cp',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('provider.securityAudit.className','org.jivesoftware.openfire.security.DefaultSecurityAuditProvider',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('xmpp.socket.ssl.active','true',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('plugin.restapi.httpAuth','secret',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('provider.admin.className','org.jivesoftware.openfire.admin.DefaultAdminProvider',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('provider.user.className','org.jivesoftware.openfire.user.DefaultUserProvider',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('user-status.historyDays','7',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('plugin.restapi.serviceLoggingEnabled','false',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('provider.vcard.className','org.igniterealtime.openfire.plugin.avatarresizer.DelegateVCardProvider',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('sasl.scram-sha-1.iteration-count','4096',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('plugin.presence.public','true',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('plugin.restapi.secret','fUzh1mfo4yVFjhct',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('provider.auth.className','org.jivesoftware.openfire.auth.DefaultAuthProvider',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('xmpp.domain','im.cf.nm.cp',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('plugin.presence.unavailable.status','Unavailable',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('update.lastCheck','1554965612079',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('provider.group.className','org.jivesoftware.openfire.group.DefaultGroupProvider',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('xmpp.auth.anonymous','false',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('plugin.restapi.allowedIPs','',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('provider.lockout.className','org.jivesoftware.openfire.lockout.DefaultLockOutProvider',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('xmpp.session.conflict-limit','0',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('plugin.restapi.enabled','true',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('update.service-enabled','false',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('route.all-resources','true',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('cache.LastActivityCache.size','-1',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('cache.offlinemessage.size','-1',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('cache.OfflineMessageSize.size','-1',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('cache.offlinePresence.size','-1',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('cache.OfflinePresenceCache.size','-1',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('cache.Roster.size','-1',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('cache.User.size','-1',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('cache.userCache.size','-1',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('cache.username2roster.size','-1',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('cache.VCard.size','-1',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('update.notify-admins','false',0,NULL);
INSERT INTO SYSDBA.OFPROPERTY (NAME,PROPVALUE,"ENCRYPTED",IV) VALUES ('update.proxy.port','-1',0,NULL);

INSERT INTO SYSDBA.OFPUBSUBAFFILIATION (SERVICEID,NODEID,JID,AFFILIATION) VALUES ('pubsub','','im.cf.nm.cp','owner');

INSERT INTO SYSDBA.OFPUBSUBDEFAULTCONF (SERVICEID,LEAF,DELIVERPAYLOADS,MAXPAYLOADSIZE,PERSISTITEMS,MAXITEMS,NOTIFYCONFIGCHANGES,NOTIFYDELETE,NOTIFYRETRACT,PRESENCEBASED,SENDITEMSUBSCRIBE,PUBLISHERMODEL,SUBSCRIPTIONENABLED,ACCESSMODEL,"LANGUAGE",REPLYPOLICY,ASSOCIATIONPOLICY,MAXLEAFNODES) VALUES ('pubsub',1,1,5120,0,1,1,1,1,0,1,'publishers',1,'open','English',NULL,'all',-1);
INSERT INTO SYSDBA.OFPUBSUBDEFAULTCONF (SERVICEID,LEAF,DELIVERPAYLOADS,MAXPAYLOADSIZE,PERSISTITEMS,MAXITEMS,NOTIFYCONFIGCHANGES,NOTIFYDELETE,NOTIFYRETRACT,PRESENCEBASED,SENDITEMSUBSCRIBE,PUBLISHERMODEL,SUBSCRIPTIONENABLED,ACCESSMODEL,"LANGUAGE",REPLYPOLICY,ASSOCIATIONPOLICY,MAXLEAFNODES) VALUES ('pubsub',0,0,0,0,0,1,1,1,0,0,'publishers',1,'open','English',NULL,'all',-1);

INSERT INTO SYSDBA.OFPUBSUBNODE (SERVICEID,NODEID,LEAF,CREATIONDATE,MODIFICATIONDATE,PARENT,DELIVERPAYLOADS,MAXPAYLOADSIZE,PERSISTITEMS,MAXITEMS,NOTIFYCONFIGCHANGES,NOTIFYDELETE,NOTIFYRETRACT,PRESENCEBASED,SENDITEMSUBSCRIBE,PUBLISHERMODEL,SUBSCRIPTIONENABLED,CONFIGSUBSCRIPTION,ACCESSMODEL,PAYLOADTYPE,BODYXSLT,DATAFORMXSLT,CREATOR,DESCRIPTION,"LANGUAGE",NAME,REPLYPOLICY,ASSOCIATIONPOLICY,MAXLEAFNODES) VALUES ('pubsub','',0,'001554965573793','001554965573793',NULL,0,0,0,0,1,1,1,0,0,'publishers',1,0,'open','','','','im.cf.nm.cp','','English','',NULL,'all',-1);

INSERT INTO SYSDBA.OFUSERPROP (USERNAME,NAME,PROPVALUE) VALUES ('admin','console.rows_per_page','/session-summary.jsp=25');




